<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to tsbox • tsbox</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to tsbox">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">tsbox</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="active nav-item"><a class="nav-link" href="../articles/tsbox.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/convert.html">Time conversion and regularization</a></li>
    <li><a class="dropdown-item" href="../articles/ts-functions.html">User defined ts-functions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/tsbox/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to tsbox</h1>
            <h3 data-toc-skip class="subtitle">Class-Agnostic Time
Series</h3>
                        <h4 data-toc-skip class="author">Christoph
Sax</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/tsbox/blob/master/vignettes/tsbox.Rmd" class="external-link"><code>vignettes/tsbox.Rmd</code></a></small>
      <div class="d-none name"><code>tsbox.Rmd</code></div>
    </div>

    
    
<p>The R ecosystem knows a <a href="https://CRAN.R-project.org/view=TimeSeries" class="external-link">vast number</a> of
time series standards. Instead of creating the ultimate <a href="https://xkcd.com/927/" class="external-link">15th</a> time series class, tsbox provides
a set of tools that are <strong>agnostic towards the existing
standards</strong>. The tools also allow you to handle time series as
plain data frames, thus making it easy to deal with time series in a <a href="https://CRAN.R-project.org/package=dplyr" class="external-link">dplyr</a> or <a href="https://CRAN.R-project.org/package=data.table" class="external-link">data.table</a>
workflow.</p>
<p>tsbox is built around a set of converters, which convert time series
stored as <code>ts</code>, <code>xts</code>, <code>zoo</code>,
<code>zooreg</code>, <code>data.frame</code>, <code>data.table</code>,
<code>tbl</code>, <code>tbl_ts</code>, <code>tbl_time</code>,
<code>tis</code>, <code>irts</code> or <code>timeSeries</code> to each
other. Because this works reliably, we can easily write functions that
work for all classes. So whether we want to smooth, scale,
differentiate, chain, forecast, regularize, or seasonally adjust a time
series, we can use the same commands to whatever time series class at
hand. And, most conveniently, we get a time series plot function that
works for all classes and frequencies.</p>
<p>To install the stable version from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tsbox"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropensci/tsbox"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="convert-everything-to-everything">Convert everything to everything<a class="anchor" aria-label="anchor" href="#convert-everything-to-everything"></a>
</h2>
<p>tsbox can convert time series stored as <code>ts</code>,
<code>xts</code>, <code>zoo</code>, <code>zooreg</code>,
<code>data.frame</code>, <code>data.table</code>, <code>tbl</code>,
<code>tbl_ts</code>, <code>tbl_time</code>, <code>tis</code>,
<code>irts</code> or <code>timeSeries</code> to each other:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/tsbox/">tsbox</a></span><span class="op">)</span></span>
<span><span class="va">x.ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span><span class="va">fdeaths</span>, <span class="va">mdeaths</span><span class="op">)</span></span>
<span><span class="va">x.xts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_xts</a></span><span class="op">(</span><span class="va">x.ts</span><span class="op">)</span></span>
<span><span class="va">x.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_df</a></span><span class="op">(</span><span class="va">x.xts</span><span class="op">)</span></span>
<span><span class="va">x.dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_dt</a></span><span class="op">(</span><span class="va">x.df</span><span class="op">)</span></span>
<span><span class="va">x.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_tbl</a></span><span class="op">(</span><span class="va">x.dt</span><span class="op">)</span></span>
<span><span class="va">x.zoo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_zoo</a></span><span class="op">(</span><span class="va">x.tbl</span><span class="op">)</span></span>
<span><span class="va">x.tsibble</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_tsibble</a></span><span class="op">(</span><span class="va">x.zoo</span><span class="op">)</span></span>
<span><span class="va">x.tibbletime</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_tibbletime</a></span><span class="op">(</span><span class="va">x.tsibble</span><span class="op">)</span></span>
<span><span class="va">x.timeSeries</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_ts.html">ts_timeSeries</a></span><span class="op">(</span><span class="va">x.tibbletime</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_ts.html">ts_ts</a></span><span class="op">(</span><span class="va">x.timeSeries</span><span class="op">)</span>, <span class="va">x.ts</span><span class="op">)</span>  <span class="co"># TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="use-the-same-functions-for-all-time-series-classes">Use the same functions for all time series classes<a class="anchor" aria-label="anchor" href="#use-the-same-functions-for-all-time-series-classes"></a>
</h2>
<p>tsbox provides a basic toolkit for handling time series. These
functions start with <code>ts_</code>, so you use them with
auto-complete (press Tab). These functions work with any
<em>ts-boxable</em> time series, ts, xts, data.frame, data.table tibble,
zoo, tsibble or timeSeries and <strong>return the class of their
inputs</strong>.</p>
<p>For example, the <code>ts_scale</code> function performs
<em>normalization</em> - it subtracts the mean and divides by the
standard deviation of series. Like almost all ts- functions, it can be
used on any ts-boxable object, with single or multiple time series.
Because <code>ts_scale</code> normalizes time series, it is useful to
make different time series comparable. All of the following operations
perform the same task, but return the same object class as the
input:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_scale.html">ts_scale</a></span><span class="op">(</span><span class="va">x.ts</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_scale.html">ts_scale</a></span><span class="op">(</span><span class="va">x.xts</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_scale.html">ts_scale</a></span><span class="op">(</span><span class="va">x.df</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_scale.html">ts_scale</a></span><span class="op">(</span><span class="va">x.dt</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_scale.html">ts_scale</a></span><span class="op">(</span><span class="va">x.tbl</span><span class="op">)</span></span></code></pre></div>
<p>There is a bunch of other transformation functions:
<code>ts_trend</code>, which estimates a trend; functions to calculate
differences, <code>ts_pc</code>, <code>ts_pcy</code>,
<code>ts_diff</code>, <code>ts_diffy</code>; a function to shift series,
<code>ts_lag</code>; functions to construct indices, both from levels
and percentage change rates: <code>ts_index</code> and
<code>ts_compound</code>. For a full list of functions, check out the
reference.</p>
</div>
<div class="section level2">
<h2 id="combine-multiple-time-series">Combine multiple time series<a class="anchor" aria-label="anchor" href="#combine-multiple-time-series"></a>
</h2>
<p>A set of helper functions makes it easy to combine multiple time
series, even if their classes are different. The basic workhorse is
<code>ts_c</code>, which collects time series. Again, this works with
single or multiple series of any ts-boxable class:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_ts.html">ts_dt</a></span><span class="op">(</span><span class="va">EuStockMarkets</span><span class="op">)</span>, <span class="va">AirPassengers</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_ts.html">ts_tbl</a></span><span class="op">(</span><span class="va">mdeaths</span><span class="op">)</span>, <span class="va">EuStockMarkets</span>, <span class="fu"><a href="../reference/ts_ts.html">ts_xts</a></span><span class="op">(</span><span class="va">lynx</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you want to choose a different name for single series, name the
arguments:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_ts.html">ts_dt</a></span><span class="op">(</span><span class="va">EuStockMarkets</span><span class="op">)</span>, `Airline Passengers` <span class="op">=</span> <span class="va">AirPassengers</span><span class="op">)</span></span></code></pre></div>
<p>Multiple series can also be combined into a single series:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_bind.html">ts_bind</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_ts.html">ts_xts</a></span><span class="op">(</span><span class="va">mdeaths</span><span class="op">)</span>, <span class="va">AirPassengers</span><span class="op">)</span></span></code></pre></div>
<p><code>ts_chain</code> offers an alternative way to combine time
series, by <em>chain-linking</em> them. The following prolongs a short
time series with percentage change rates of a longer one:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">md.short</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_span.html">ts_span</a></span><span class="op">(</span><span class="va">mdeaths</span>, end <span class="op">=</span> <span class="st">"1976-12-01"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_bind.html">ts_chain</a></span><span class="op">(</span><span class="va">md.short</span>, <span class="va">fdeaths</span><span class="op">)</span></span></code></pre></div>
<p>To pick a subset of time series, and optionally rename, use
<code>ts_pick</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_pick.html">ts_pick</a></span><span class="op">(</span><span class="va">EuStockMarkets</span>, <span class="st">'DAX'</span>, <span class="st">'SMI'</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_pick.html">ts_pick</a></span><span class="op">(</span><span class="va">EuStockMarkets</span>, `my shiny new name` <span class="op">=</span> <span class="st">'DAX'</span>, <span class="st">'SMI'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="frequency-conversion-and-alignment">Frequency conversion and alignment<a class="anchor" aria-label="anchor" href="#frequency-conversion-and-alignment"></a>
</h2>
<p>There are functions to convert the frequency of time series and to
regularize irregular time series. The following changes the frequency of
two series to annual:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_frequency.html">ts_frequency</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span><span class="va">AirPassengers</span>, <span class="va">austres</span><span class="op">)</span>, <span class="st">"year"</span>, <span class="va">sum</span><span class="op">)</span></span></code></pre></div>
<p>We already met <code>ts_span</code>, which can be used to limit the
time span of a series. <code>ts_regular</code> makes irregular time
series regular by turning implicit missing values into explicit
<code>NA</code>s.</p>
</div>
<div class="section level2">
<h2 id="and-plot-just-about-everything">And plot just about everything<a class="anchor" aria-label="anchor" href="#and-plot-just-about-everything"></a>
</h2>
<p>Of course, this works for plotting, too. The basic function is
<code>ts_plot</code>, which can be used with any ts-boxable time series,
single or multiple, of any frequency:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_plot.html">ts_plot</a></span><span class="op">(</span><span class="va">AirPassengers</span>, <span class="fu"><a href="../reference/ts_ts.html">ts_df</a></span><span class="op">(</span><span class="va">lynx</span><span class="op">)</span>, <span class="fu"><a href="../reference/ts_ts.html">ts_xts</a></span><span class="op">(</span><span class="va">fdeaths</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you want to use different names than the object names, just name
the arguments (and optionally set a title):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_plot.html">ts_plot</a></span><span class="op">(</span></span>
<span>  `Airline Passengers` <span class="op">=</span> <span class="va">AirPassengers</span>,</span>
<span>  `Lynx trappings` <span class="op">=</span> <span class="fu"><a href="../reference/ts_ts.html">ts_df</a></span><span class="op">(</span><span class="va">lynx</span><span class="op">)</span>,</span>
<span>  `Deaths from Lung Diseases` <span class="op">=</span> <span class="fu"><a href="../reference/ts_ts.html">ts_xts</a></span><span class="op">(</span><span class="va">fdeaths</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Airlines, trappings, and deaths"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Monthly passengers, annual trappings, monthly deaths"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="fig/plot1.png"></p>
<p>There is also a version that uses <a href="https://CRAN.R-project.org/package=ggplot2" class="external-link">ggplot2</a> that uses
the same syntax. With <code><a href="../reference/ts_ggplot.html">theme_tsbox()</a></code> and
<code><a href="../reference/ts_ggplot.html">scale_color_tsbox()</a></code>, the output of <code>ts_ggplot</code>
is very similar to <code>ts_plot</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_ggplot.html">ts_ggplot</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_scale.html">ts_scale</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span></span>
<span>  <span class="va">mdeaths</span>,</span>
<span>  <span class="va">austres</span>,</span>
<span>  <span class="va">AirPassengers</span>,</span>
<span>  DAX <span class="op">=</span> <span class="va">EuStockMarkets</span><span class="op">[</span> ,<span class="st">'DAX'</span><span class="op">]</span></span>
<span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Finally, <code>ts_summary</code> returns a data frame with frequently
used time series properties:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_summary.html">ts_summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span><span class="va">mdeaths</span>, <span class="va">austres</span>, <span class="va">AirPassengers</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="time-series-in-data-frames">Time series in data frames<a class="anchor" aria-label="anchor" href="#time-series-in-data-frames"></a>
</h2>
<p>Thanks to packages such as <code>data.table</code> and
<code>dplyr</code>, data frames have become the dominant data structure
in R, and storing time series in a data frame is the natural
consequence. And even if you don’t intend to keep your time series in
data frames, this is the format in which you import and export the
data.</p>
<p>In data frames, i.e., in a <code>data.frame</code>, a
<code>data.table</code>, or a <code>tibble</code>, tsbox stores one or
multiple time series in the ‘long’ format. tsbox detects a
<em>value</em>, a <em>time</em> and zero, one or several <em>id</em>
columns. Column detection is done in the following order:</p>
<ol style="list-style-type: decimal">
<li><p>Starting <strong>on the right</strong>, the first first
<code>numeric</code> or <code>integer</code> column is used as
<strong>value column</strong>.</p></li>
<li><p>Using the remaining columns and starting on the right again, the
first <code>Date</code>, <code>POSIXct</code>, <code>numeric</code> or
<code>character</code> column is used as <strong>time column</strong>.
<code>character</code> strings are parsed by
<code><a href="https://rdrr.io/pkg/anytime/man/anytime.html" class="external-link">anytime::anytime()</a></code>. The timestamp, <code>time</code>,
indicates the beginning of a period.</p></li>
<li><p><strong>All remaining</strong> columns are <strong>id
columns</strong>. Each unique combination of id columns points to a time
series.</p></li>
</ol>
<p><strong>Alternatively</strong>, the time column and the value column
to be <strong>explicitly named</strong> as <code>time</code> and
<code>value</code>. If explicit names are used, the column order will be
ignored. If columns are detected automatically, a message is
returned.</p>
<p>For example, the following data frame has the standard structure is
understood by tsbox:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dta</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">series_name</span>, <span class="op">~</span><span class="va">time</span>,        <span class="op">~</span><span class="va">value</span>,</span>
<span>    <span class="st">"ser1"</span>,       <span class="st">"2001-01-01"</span>,  <span class="fl">1</span>,</span>
<span>    <span class="st">"ser1"</span>,       <span class="st">"2002-01-01"</span>,  <span class="fl">2</span>,</span>
<span>    <span class="st">"ser2"</span>,       <span class="st">"2001-01-01"</span>,  <span class="fl">10</span>,</span>
<span>    <span class="st">"ser2"</span>,       <span class="st">"2002-01-01"</span>,  <span class="fl">20</span>,</span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_ts.html">ts_ts</a></span><span class="op">(</span><span class="va">dta</span><span class="op">)</span></span>
<span><span class="co"># Time Series:</span></span>
<span><span class="co"># Start = 2001</span></span>
<span><span class="co"># End = 2002</span></span>
<span><span class="co"># Frequency = 1</span></span>
<span><span class="co">#      ser1 ser2</span></span>
<span><span class="co"># 2001    1   10</span></span>
<span><span class="co"># 2002    2   20</span></span></code></pre></div>
<p>If time and value columns have different names than <code>time</code>
and <code>value</code>, it still works but returns a message:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">dta</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    mytime <span class="op">=</span> <span class="va">time</span>,</span>
<span>    myvalue <span class="op">=</span> <span class="va">value</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/ts_ts.html">ts_ts</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># [time]: 'mytime' [value]: 'myvalue'</span></span>
<span><span class="co"># Time Series:</span></span>
<span><span class="co"># Start = 2001</span></span>
<span><span class="co"># End = 2002</span></span>
<span><span class="co"># Frequency = 1</span></span>
<span><span class="co">#      ser1 ser2</span></span>
<span><span class="co"># 2001    1   10</span></span>
<span><span class="co"># 2002    2   20</span></span></code></pre></div>
<p>We can also use multiple id columns. When converted into a
<code>ts</code> object, multiple columns are combined into a single
value:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dta_multi_id</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>    <span class="op">~</span><span class="va">series_name</span>, <span class="op">~</span><span class="va">series_attribute</span>,  <span class="op">~</span><span class="va">time</span>,        <span class="op">~</span><span class="va">value</span>,</span>
<span>    <span class="st">"ser1"</span>,       <span class="st">"A"</span>,                  <span class="st">"2001-01-01"</span>,  <span class="fl">1.5</span>,</span>
<span>    <span class="st">"ser1"</span>,       <span class="st">"A"</span>,                  <span class="st">"2002-01-01"</span>,  <span class="fl">2.5</span>,</span>
<span>    <span class="st">"ser2"</span>,       <span class="st">"A"</span>,                  <span class="st">"2001-01-01"</span>,  <span class="fl">10.5</span>,</span>
<span>    <span class="st">"ser2"</span>,       <span class="st">"A"</span>,                  <span class="st">"2002-01-01"</span>,  <span class="fl">20.5</span>,</span>
<span>    <span class="st">"ser1"</span>,       <span class="st">"B"</span>,                  <span class="st">"2001-01-01"</span>,  <span class="fl">1</span>,</span>
<span>    <span class="st">"ser1"</span>,       <span class="st">"B"</span>,                  <span class="st">"2002-01-01"</span>,  <span class="fl">2</span>,</span>
<span>    <span class="st">"ser2"</span>,       <span class="st">"B"</span>,                  <span class="st">"2001-01-01"</span>,  <span class="fl">10</span>,</span>
<span>    <span class="st">"ser2"</span>,       <span class="st">"B"</span>,                  <span class="st">"2002-01-01"</span>,  <span class="fl">20</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ts_ts.html">ts_ts</a></span><span class="op">(</span><span class="va">dta_multi_id</span><span class="op">)</span></span>
<span><span class="co"># Time Series:</span></span>
<span><span class="co"># Start = 2001</span></span>
<span><span class="co"># End = 2002</span></span>
<span><span class="co"># Frequency = 1</span></span>
<span><span class="co">#      ser1_A ser2_A ser1_B ser2_B</span></span>
<span><span class="co"># 2001    1.5   10.5      1     10</span></span>
<span><span class="co"># 2002    2.5   20.5      2     20</span></span></code></pre></div>
<p>Data frames must be in a long format, with a single value columns
only.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dta_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ts_long.html">ts_wide</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_ts.html">ts_tbl</a></span><span class="op">(</span><span class="fu"><a href="../reference/ts_c.html">ts_c</a></span><span class="op">(</span><span class="va">mdeaths</span>, <span class="va">fdeaths</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># # A tibble: 72 × 3</span></span>
<span><span class="co">#    time       mdeaths fdeaths</span></span>
<span><span class="co">#    &lt;date&gt;       &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#  1 1974-01-01    2134     901</span></span>
<span><span class="co">#  2 1974-02-01    1863     689</span></span>
<span><span class="co">#  3 1974-03-01    1877     827</span></span>
<span><span class="co">#  4 1974-04-01    1877     677</span></span>
<span><span class="co">#  5 1974-05-01    1492     522</span></span>
<span><span class="co">#  6 1974-06-01    1249     406</span></span>
<span><span class="co">#  7 1974-07-01    1280     441</span></span>
<span><span class="co">#  8 1974-08-01    1131     393</span></span>
<span><span class="co">#  9 1974-09-01    1209     387</span></span>
<span><span class="co"># 10 1974-10-01    1492     582</span></span>
<span><span class="co"># # … with 62 more rows</span></span></code></pre></div>
<p>tsbox tries to detect wide structures and warns if they occur:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_ts.html">ts_ts</a></span><span class="op">(</span><span class="va">dta_wide</span><span class="op">)</span></span>
<span><span class="co"># Using numeric [id] columns: 'mdeaths'.</span></span>
<span><span class="co"># Are you using a wide data frame? To convert, use 'ts_long()'.</span></span>
<span><span class="co"># Convert columns to character or factor to silence this message.</span></span></code></pre></div>
<p>If data frames are in a wide format, <code><a href="../reference/ts_long.html">ts_long()</a></code> can be
used for conversion.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ts_long.html">ts_long</a></span><span class="op">(</span><span class="va">dta_wide</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-tsbox-in-a-dplyr-pipe-workflow">Using tsbox in a dplyr / pipe workflow<a class="anchor" aria-label="anchor" href="#using-tsbox-in-a-dplyr-pipe-workflow"></a>
</h2>
<p>tsbox works well with tibbles and with the pipe (<code>|&gt;</code>
or <code>%&gt;%</code>), so it can be nicely integrated into a dplyr
workflow:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hadley/nycflights13" class="external-link">nycflights13</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="va">dta</span> <span class="op">&lt;-</span> <span class="va">weather</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">origin</span>, time <span class="op">=</span> <span class="va">time_hour</span>, <span class="va">temp</span>, <span class="va">humid</span>, <span class="va">precip</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/ts_long.html">ts_long</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dta</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="st">"temp"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/ts_trend.html">ts_trend</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/ts_plot.html">ts_plot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="related-packages">Related packages<a class="anchor" aria-label="anchor" href="#related-packages"></a>
</h2>
<p>The <em>tsibble</em> package provides infrastructure for ‘tidy’
temporal data, and offers some converters between time series
classes.</p>
<p>The <em>timetk</em> package offers converters and tools for data
visualization and wrangling of time series data.</p>
<p><em>zoo</em> and <em>xts</em> provide converters between some time
series classes.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
